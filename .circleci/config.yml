version: 2.1

jobs:
  backend-tests:
    docker:
      - image: cimg/node:16.10
    steps:
      - checkout
      - run:
          name: Show repo contents
          command: ls -la
      - run:
          name: Run backend tests
          command: |
            # Check what backend directory exists
            if [ -d "Backend" ]; then
              cd Backend
            elif [ -d "backend" ]; then
              cd backend
            else
              echo "Backend directory not found!"
              ls -la
              exit 1
            fi
            npm ci
            npm test

  frontend-tests:
    docker:
      - image: cimg/node:16.10
    steps:
      - checkout
      - run:
          name: Show repo contents
          command: ls -la
      - run:
          name: Run frontend tests
          command: |
            # Check what frontend directory exists
            if [ -d "frontend" ]; then
              cd frontend
            elif [ -d "Frontend" ]; then
              cd Frontend
            else
              echo "Frontend directory not found!"
              ls -la
              exit 1
            fi
            npm ci
            npm test

workflows:
  build_and_test:
    jobs:
      - backend-tests
      - frontend-tests
